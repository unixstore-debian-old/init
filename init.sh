#!/usr/bin/bash

(( EUID != 0 )) && { echo >&2 "This script should be run as root!"; exit 1; }

# -------------------------------------------------------------------------------------------------------------------- #
# CONFIGURATION.
# -------------------------------------------------------------------------------------------------------------------- #

ver="11"
url="https://download.opensuse.org/repositories"
name="unixstore"

# -------------------------------------------------------------------------------------------------------------------- #
# INITIALIZATION.
# -------------------------------------------------------------------------------------------------------------------- #

init() {
  install
}

# -------------------------------------------------------------------------------------------------------------------- #
# INSTALL.
# -------------------------------------------------------------------------------------------------------------------- #

install() {
  echo "deb [signed-by=/etc/apt/trusted.gpg.d/${name}.gpg] ${url}/home:/unixstore:/debian/Debian_${ver}/ /" | tee "/etc/apt/sources.list.d/${name}.list" \
    && curl -fsSL "${url}/home:unixstore:debian/Debian_${ver}/Release.key" | gpg --dearmor | tee "/etc/apt/trusted.gpg.d/${name}.gpg" > /dev/null \
    && apt update
}

# -------------------------------------------------------------------------------------------------------------------- #
# -------------------------------------------------< INIT FUNCTIONS >------------------------------------------------- #
# -------------------------------------------------------------------------------------------------------------------- #

init "$@"; exit 0
